# Git 分支

在进行提交操作时，Git 会保存一个提交对象（commit object）。

假设现在有一个工作目录，里面包含了三个将要被暂存和提交的文件。 暂存操作会为每一个文件计算校验和（使用 SHA-1 哈希算法），然后会把当前版本的文件快照保存到 Git 仓库中（Git 使用 **blob 对象**来保存它们），最终将校验和加入到暂存区域等待提。

当使用 git commit 进行提交操作时，Git 会先计算每一个子目录（本例中只有项目根目录）的校验和，然后在Git 仓库中这些校验和保存为**树对象**。 随后，Git 便会创建一个**提交对象**，它除了包含上面提到的那些信息外，还包含指向这个树对象（项目根目录）的指针。如此一来，Git 就可以在需要的时候重现此次保存的快照。


常用操作
 - 创建分支
   - `git branch testing` 
   - 创建分支后，有一个名为 HEAD 的特殊指针指向当前所在的分支。
 - 分支切换
   - `git checkout testing` 让`HEAD`自己指针指向testing
   - 如果在某分支修改了没有提交然后就切换分支，会有失败并有提示
 - 查看当前所处分支和各分支名
   - `git branch`
 - 查看分支交叉情况
   - `git log --oneline --graph`
 - 删除分支
   - `git branch -d hotfix`
 - 分支合并
   - 切换到想要合并到的分支，将目标分支合并进来
   - `git merge iss53`
 - 查看每一个分支的最后一个提交
   - `git branch -v`
 - 查看哪些分支 已经/没有 合并到当前分支
   - `git branch --merged`
   - `git branch --no-merged`


### 合并冲突
分支创建后，主分支与分出去的分支都修改了同一个地方。
```
CONFLICT (content): Merge conflict in index.html
Automatic merge failed; fix conflicts and then commit the result.
```

此时 Git 做了合并，但是没有自动地创建一个新的合并提交。 Git 会暂停下来，等待你去解决合并产生的冲突。 

使用`git status`可以看到文件处于未合并（unmerged）状态。

任何因包含合并冲突而有待解决的文件，都会以未合并状态标识出来。需要手动解决冲突。看起来像下面这个样子：

```
<<<<<<< HEAD
master branch diff 
=======
hhhhhhhhh 
>>>>>>> testing
```

在你解决了所有文件里的冲突之后，对每个文件使用 `git add` 命令来将其标记为冲突已解决。 **一旦暂存这些原本有冲突的文件，Git 就会将它们标记为冲突已解决。**

再使用`merge`操作提交更新就好。


### 远程分支
远程引用是对远程仓库的引用（指针），包括分支、标签等等。
远程跟踪分支是远程分支状态的引用。 它们是你不能移动的本地引用，当你做任何网络通信操作时，它们会自动移动。 远程跟踪分支像是你上次连接到远程仓库时，那些分支所处状态的书签。

它们以 (remote)/(branch) 形式命名。 例如，如果你想要看你最后一次与远程仓库 origin 通信时 master 分支的状态，你可以查看 origin/master 分支。 你与同事合作解决一个问题并且他们推送了一个 iss53 分支，你可能有自己的本地 iss53 分支；但是在服务器上的分支会指向 origin/iss53 的提交。

查看远程分支`git remote`